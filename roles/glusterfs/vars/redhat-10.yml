---
# Copyright 2025, Cleura AB.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

glusterfs_package_repo_keys:
  - name: copr-neil-glusterfs
    key: /etc/pki/rpm-gpg/RPM-GPG-KEY-COPR-NEIL-GLUSTERFS
    keyfile: gpg/7D0CC81C
  - name: epel-10
    key: /etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-10
    keyfile: gpg/E37ED158

glusterfs_package_repos:
  - name: copr-gluster
    baseurl: "https://download.copr.fedorainfracloud.org/results/neil/glusterfs/epel-10-$basearch/"
    description: "Copr repo for GlusterFS"
    enabled: true
    gpgcheck: true
    gpgkey: "file://{{ (glusterfs_package_repo_keys | selectattr('name', 'eq', 'copr-neil-glusterfs') | first).key }}"
    state: present
  - name: epel-gluster-deps
    baseurl: "{{ glusterfs_epel_mirror ~ '/' ~ ansible_facts['distribution_major_version'] ~ '/Everything/' ~ ansible_facts['architecture'] }}"
    description: "Extra Packages for Enterprise Linux $releasever - $basearch"
    gpgkey: "file://{{ (glusterfs_package_repo_keys | selectattr('name', 'eq', 'epel-10') | first).key }}"
    gpgcheck: true
    enabled: true
    state: present
    includepkgs:
      - gperftools-libs
      - libunwind

glusterfs_server_dnf_sig_packages: []

glusterfs_server_dnf_enable:
  - crb

glusterfs_server_distro_packages:
  - python3-setuptools # required for gluster ansible collection
  - glusterfs-server
  - glusterfs-fuse
  - systemd-udev
